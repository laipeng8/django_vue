"use strict";(self["webpackChunkbpvank_front_end"]=self["webpackChunkbpvank_front_end"]||[]).push([[76],{5076:function(e,o,t){t.r(o),t.d(o,{default:function(){return N}});var r=t(3396);const n=e=>((0,r.dD)("data-v-6425a271"),e=e(),(0,r.Cn)(),e),a={class:"loginBox"},i=n((()=>(0,r._)("a",{class:"login_logo"},null,-1))),l={class:"midgroup"},s={class:"loginwrap loginwarrp"},d={class:"logingroup login_form"},c=n((()=>(0,r._)("h2",{style:{"text-align":"center",color:"#2fa7b9"}},"登 录",-1))),u=(0,r.Uk)("立即登录 "),p={class:"toPath"},g=(0,r.Uk)(" 还没有账号，"),f=n((()=>(0,r._)("footer",{style:{"text-align":"center"}},[(0,r._)("p",null,"相信有一天, 理想主义终将所向披靡.")],-1))),m=n((()=>(0,r._)("div",{class:"footer_copyright"},[(0,r._)("p",null," · Designed by Bpvank. All Rights Reserved. Copyright © 2022 Bpvank · ")],-1)));function h(e,o,t,n,h,w){const v=(0,r.up)("el-input"),C=(0,r.up)("el-form-item"),_=(0,r.up)("VerificationCode"),b=(0,r.up)("el-button"),y=(0,r.up)("el-form");return(0,r.wg)(),(0,r.iD)("div",a,[i,(0,r._)("div",l,[(0,r._)("div",s,[(0,r._)("div",d,[c,(0,r.Wm)(y,{ref:"ruleFormRef",model:e.ruleForm,"status-icon":"",rules:n.rules,"label-width":"120px",style:{"padding-top":"20px"},"label-position":"top",size:"large",class:"demo-ruleForm"},{default:(0,r.w5)((()=>[(0,r.Wm)(C,{prop:"loginName"},{default:(0,r.w5)((()=>[(0,r.Wm)(v,{"prefix-icon":n.User,modelValue:e.ruleForm.loginName,"onUpdate:modelValue":o[0]||(o[0]=o=>e.ruleForm.loginName=o),placeholder:"请输入用户名或者电子邮箱"},null,8,["prefix-icon","modelValue"])])),_:1}),(0,r.Wm)(C,{prop:"loginPass"},{default:(0,r.w5)((()=>[(0,r.Wm)(v,{"prefix-icon":n.Lock,modelValue:e.ruleForm.loginPass,"onUpdate:modelValue":o[1]||(o[1]=o=>e.ruleForm.loginPass=o),"show-password":"",autocomplete:"off",placeholder:"请输入密码"},null,8,["prefix-icon","modelValue"])])),_:1}),(0,r.Wm)(C,{prop:"inputVerificationCode"},{default:(0,r.w5)((()=>[(0,r.Wm)(v,{"prefix-icon":n.Right,modelValue:e.ruleForm.inputVerificationCode,"onUpdate:modelValue":o[2]||(o[2]=o=>e.ruleForm.inputVerificationCode=o),placeholder:"请输入验证码"},{append:(0,r.w5)((()=>[(0,r.Wm)(_,{ref:"player",onGetVerificationCode:n.getVerificationCode,title:"看不清？点击换一张"},null,8,["onGetVerificationCode"])])),_:1},8,["prefix-icon","modelValue"])])),_:1}),(0,r.Wm)(C,{prop:"loginBtn",class:"loginBtn"},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{color:"#2fa7b9",plain:"",style:{width:"100%"},onClick:e.submitLoginInfo},{default:(0,r.w5)((()=>[u])),_:1},8,["onClick"])])),_:1}),(0,r._)("p",p,[g,(0,r._)("span",{style:{color:"#2fa7b9"},onClick:o[3]||(o[3]=e=>n.toPath("/register"))},"立即注册"),(0,r._)("span",{style:{float:"right",color:"#999"},onClick:o[4]||(o[4]=e=>n.toPath("/resetPassword"))},"忘记密码？")])])),_:1},8,["model","rules"]),f])])]),m])}t(1703);var w=t(7139);function v(e,o,t,n,a,i){return(0,r.wg)(),(0,r.iD)("div",{class:"ValidCode disabled-select",style:(0,w.j5)(`width:${t.width}; height:${t.height};padding:0px 10px;`),onClick:o[0]||(o[0]=(...e)=>n.refreshCode&&n.refreshCode(...e))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.codeList,((e,o)=>((0,r.wg)(),(0,r.iD)("span",{key:o,style:(0,w.j5)(n.getStyle(e))},(0,w.zw)(e.code),5)))),128))],4)}var C=t(4870),_={props:{width:{type:String,default:"80px"},height:{type:String,default:"34px"},length:{type:Number,default:4}},setup(e,{emit:o}){const t=(0,C.qj)({codeList:[]});(0,r.bv)((()=>{a()}));const n=()=>{a()},a=()=>{const r=e.length,n=[],a="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz0123456789",i=a.length;for(let e=0;e<r;e++){const e=[Math.round(220*Math.random()),Math.round(240*Math.random()),Math.round(200*Math.random())];n.push({code:a.charAt(Math.floor(Math.random()*i)),color:`rgb(${e})`,fontSize:`1${[Math.floor(10*Math.random())]}px`,padding:`${[Math.floor(10*Math.random())]}px`,transform:`rotate(${Math.floor(90*Math.random())-Math.floor(90*Math.random())}deg)`})}t.codeList=n,o("getVerificationCode",n.map((e=>e.code)).join(""))},i=e=>`color: ${e.color}; font-size: ${e.fontSize}; padding: ${e.padding}; transform: ${e.transform}`;return{...(0,C.BK)(t),onMounted:r.bv,refreshCode:n,createdCode:a,getStyle:i}}},b=t(89);const y=(0,b.Z)(_,[["render",v],["__scopeId","data-v-56caae84"]]);var k=y,V=t(2748),x=t(2655),M=t(4775),F=t(7178),I=t(2483),P=t(6265),L=t.n(P),S={components:{VerificationCode:k},setup(){const e=e=>{window.location.href=e},o=(0,I.yj)(),t=(0,I.tv)(),r=(0,C.iH)(null),n=(0,C.iH)(""),a=(0,C.qj)({ruleForm:{loginName:"",loginPass:"",verificationCode:"",inputVerificationCode:""},registerUrl:location.protocol+"//"+location.host+"/register.html"}),i=(e,o,t)=>{if(!o)return t(new Error("请填写此字段~"));t()},l=(e,o,t)=>{if(!o)return t(new Error("请填写此字段~"));t()},s=(e,o,t)=>o?o.toLowerCase()!=a.ruleForm.verificationCode.toLowerCase()?t(new Error("嘿，验证码输入有误哟~")):void t():t(new Error("请填写此字段~")),d=e=>{a.ruleForm.verificationCode=e},c=(0,C.qj)({loginName:[{validator:i,trigger:"blur"}],loginPass:[{validator:l,trigger:"blur"}],inputVerificationCode:[{validator:s,trigger:"blur"}]});function u(e){const n=()=>{console.log(e.value),e.value.validate((n=>{if(n){const i=sessionStorage.getItem("userInfo");function l(){let n={loginName:a.ruleForm.loginName,loginPass:a.ruleForm.loginPass};L().get("/login/showAllUserInfo",{params:n}).then((n=>{if("0"==n.data.code){console.log(n.data.data.userId),L().get("/login/insertLoginInfo",{params:{userId:n.data.data.userId}}),window.sessionStorage.setItem("userInfo",JSON.stringify(n.data)),(0,C.SU)(r).refreshCode(),e.value.resetFields();const a=M.kN.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout((()=>{a.close(),o.query.redirect?t.push({path:decodeURIComponent(o.query.redirect)}):t.push({path:"/backstageHome"})}),1e3)}else(0,F.z8)({showClose:!0,message:"登录失败，用户名或密码有误！",type:"error"})}))}i?x.T.confirm("糟糕！系统检测到您已登录，请选择继续登录or前往后台","登录提示",{confirmButtonText:"继续登录",cancelButtonText:"前往后台",type:"warning",center:!0}).then((()=>{window.sessionStorage.removeItem("userInfo"),l()})).catch((()=>{window.location.href="/backstageHome"})):l()}}))};return{submitLoginInfo:n}}return{...(0,C.BK)(a),getVerificationCode:d,...u(n),toPath:e,route:o,player:r,rules:c,ruleFormRef:n,User:V.User,Lock:V.Lock,Right:V.Right}}};const U=(0,b.Z)(S,[["render",h],["__scopeId","data-v-6425a271"]]);var N=U}}]);