"use strict";(self["webpackChunkbpvank_front_end"]=self["webpackChunkbpvank_front_end"]||[]).push([[785],{785:function(e,a,t){t.r(a),t.d(a,{default:function(){return k}});var n=t(3396),l=t(9242),r=t(7139);const o={class:"card-header"},s=(0,n.Uk)(" 评论管理 "),u={class:"hidden-sm-and-down"},c={class:"visible"},i={style:{display:"inline-flex","justify-content":"center","align-items":"center"}},d={key:0},p={key:1},g=["href"],m=(0,n.Uk)("删除"),f={class:"el-pagination__total is-first"};function h(e,a,t,h,w,y){const _=(0,n.up)("ChatDotSquare"),b=(0,n.up)("el-icon"),z=(0,n.up)("el-input"),x=(0,n.up)("el-col"),W=(0,n.up)("Refresh"),I=(0,n.up)("el-row"),S=(0,n.up)("Search"),v=(0,n.up)("el-table-column"),C=(0,n.up)("el-tooltip"),P=(0,n.up)("Link"),k=(0,n.up)("el-button"),V=(0,n.up)("el-popconfirm"),D=(0,n.up)("el-table"),T=(0,n.up)("el-pagination"),U=(0,n.up)("el-card"),j=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.j4)(U,{class:"box-card"},{header:(0,n.w5)((()=>[(0,n._)("div",o,[(0,n._)("h3",null,[(0,n.Wm)(b,{style:{"margin-right":"10px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(_)])),_:1}),s]),(0,n._)("div",u,[(0,n.Wm)(I,{gutter:10},{default:(0,n.w5)((()=>[(0,n.Wm)(x,{span:18},{default:(0,n.w5)((()=>[(0,n.Wm)(z,{"prefix-icon":h.Search,modelValue:e.searchValue,"onUpdate:modelValue":a[0]||(a[0]=a=>e.searchValue=a),onKeyup:(0,l.D2)(h.search,["enter","native"]),placeholder:"关键字搜索（回车）"},null,8,["prefix-icon","modelValue","onKeyup"])])),_:1}),(0,n.Wm)(x,{span:6,style:{display:"inline-flex","justify-content":"center","align-items":"center"}},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{style:{"font-size":"20px",color:"#b3b6bc"},onClick:h.refresh},{default:(0,n.w5)((()=>[(0,n.Wm)(W)])),_:1},8,["onClick"])])),_:1})])),_:1})]),(0,n._)("div",c,[(0,n._)("p",i,[(0,n.Wm)(b,{style:{"margin-right":"20px"},onClick:h.openSearch},{default:(0,n.w5)((()=>[(0,n.Wm)(S)])),_:1},8,["onClick"]),(0,n.Wm)(b,{onClick:h.refresh},{default:(0,n.w5)((()=>[(0,n.Wm)(W)])),_:1},8,["onClick"])])])])])),default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.wy)(((0,n.wg)(),(0,n.j4)(D,{"element-loading-text":"玩命加载中...",data:e.tableData,style:{width:"100%","text-align":"center"},"cell-style":{textAlign:"center"},"row-class-name":e.rowClassName,"header-cell-style":{fontSize:"15px",background:"#2fa7b9",color:"white",textAlign:"center"}},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{label:"序号",width:"100",type:"index",index:h.Nindex},null,8,["index"]),(0,n.Wm)(v,{prop:"commentId",label:"评论ID",width:"100"}),(0,n.Wm)(v,{label:"上级评论ID",width:"120"},{default:(0,n.w5)((e=>[0==e.row.parentId?((0,n.wg)(),(0,n.iD)("div",d,"一级评论")):((0,n.wg)(),(0,n.iD)("div",p,(0,r.zw)(e.row.parentId),1))])),_:1}),(0,n.Wm)(v,{prop:"userName",label:"评论者",width:"150"}),(0,n.Wm)(v,{label:"内容"},{default:(0,n.w5)((e=>[(0,n.Wm)(C,{content:e.row.content,placement:"top",effect:"light"},{default:(0,n.w5)((()=>[(0,n._)("span",null,(0,r.zw)(e.row.content),1)])),_:2},1032,["content"])])),_:1}),(0,n.Wm)(v,{label:"评论文章"},{default:(0,n.w5)((e=>[(0,n.Wm)(C,{content:e.row.articleTitle,placement:"top",effect:"light"},{default:(0,n.w5)((()=>[(0,n._)("a",{href:"/articleDetails/"+e.row.articleId,style:{display:"inline-flex","justify-content":"center","align-items":"center"}},[(0,n.Wm)(b,{style:{"margin-right":"5px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(P)])),_:1}),(0,n.Uk)(" "+(0,r.zw)(e.row.articleTitle),1)],8,g)])),_:2},1032,["content"])])),_:1}),(0,n.Wm)(v,{prop:"commentDate",label:"评论时间"}),(0,n.Wm)(v,{label:"操作",width:"80"},{default:(0,n.w5)((e=>[(0,n.Wm)(V,{"confirm-button-text":"确定","cancel-button-text":"取消",icon:h.Delete,"icon-color":"#626AEF",title:"确定删除此评论吗？",onConfirm:a=>h.deleteComment(e.$index,e.row)},{reference:(0,n.w5)((()=>[(0,n.Wm)(k,{size:"small",type:"danger",style:{"margin-bottom":"10px"}},{default:(0,n.w5)((()=>[m])),_:1})])),_:2},1032,["icon","onConfirm"])])),_:1})])),_:1},8,["data","row-class-name"])),[[j,e.loading]]),(0,n._)("div",null,[(0,n.wy)((0,n.Wm)(T,{background:"",modelValue:e.currentPage,"onUpdate:modelValue":a[1]||(a[1]=a=>e.currentPage=a),modelModifiers:{"sync:current-page":!0},"page-size":8,"page-sizes":[8],layout:"slot, prev, pager, next, sizes, jumper",total:e.total,onSizeChange:e.handleSizeChange,onCurrentChange:h.changePage,currentPage:e.currentPage,"onUpdate:currentPage":a[2]||(a[2]=a=>e.currentPage=a)},{default:(0,n.w5)((()=>[(0,n._)("span",f," 共 "+(0,r.zw)(e.total)+" 条记录 当前显示第 "+(0,r.zw)(e.currentPage)+" 页记录 ",1)])),_:1},8,["modelValue","total","onSizeChange","onCurrentChange","currentPage"]),[[l.F8,e.total>8]])])])])),_:1})}var w=t(4870),y=t(2748),_=t(6265),b=t.n(_),z=t(2655),x=t(7178),W=t(6666);function I(e){e.loading=!0;const a=sessionStorage.getItem("userInfo"),t=JSON.parse(a);e.userInfo=t.data;var n={currentPage:e.currentPage,pageSize:e.pageSize,userType:e.userInfo.userType,userId:e.userInfo.userId};b().get("/comment/page/byUserType",{params:n}).then((a=>{e.total=a.data.data.total,e.pageSize=a.data.data.pageSize,e.currentPage=a.data.data.currentPage,e.tableData=a.data.data.list,e.loading=!1}))}function S(e){e.loading=!0;const a=sessionStorage.getItem("userInfo"),t=JSON.parse(a);e.userInfo=t.data;var n={currentPage:e.currentPage,pageSize:e.pageSize,userType:e.userInfo.userType,userId:e.userInfo.userId,searchContent:e.searchValue};b().get("/comment/page/byUserType",{params:n}).then((a=>{e.total=a.data.data.total,e.pageSize=a.data.data.pageSize,e.currentPage=a.data.data.currentPage,e.tableData=a.data.data.list,e.loading=!1}))}var v={setup(e){(0,n.bv)((()=>{I(a)}));const a=(0,w.qj)({userInfo:null,searchValue:"",tableData:[],total:0,pageSize:8,currentPage:1,loading:!1}),t=e=>{a.currentPage=e,""!==a.searchValue?S(a):I(a)},l=e=>{const t=a.currentPage,n=a.pageSize;return e+1+(t-1)*n},r=()=>{z.T.prompt("请输入网站关键字进行搜索","搜索",{confirmButtonText:"搜索",cancelButtonText:"取消",inputErrorMessage:"Invalid Email"}).then((({value:e})=>{a.auditValue=null,a.searchValue=e,S(a),null!==e?(0,x.z8)({type:"success",message:`关键字“${e}”搜索内容如下`}):(0,x.z8)({type:"success",message:"已为您清除搜索"})}))},o=()=>{a.auditValue=null,S(a),""!==a.searchValue?(0,x.z8)({type:"success",message:`关键字“${a.searchValue}”搜索内容如下`}):(0,x.z8)({type:"success",message:"已为您清除搜索"})},s=()=>{a.searchValue="",a.auditValue=null,I(a),(0,x.z8)({message:"刷新成功",type:"success"})},u=(e,t)=>{b()["delete"]("/comment/page/byUserType",{params:{commentId:t.commentId}}).then((e=>{0==e.data.code?((0,W.bM)({title:"提示",message:"已成功删除评论",type:"success"}),""!==a.searchValue?S(a):I(a)):x.z8.error("评论删除失败")}))};return{Search:y.Search,Delete:y.Delete,...(0,w.BK)(a),search:o,openSearch:r,changePage:t,Nindex:l,refresh:s,deleteComment:u}}},C=t(89);const P=(0,C.Z)(v,[["render",h],["__scopeId","data-v-090b7352"]]);var k=P}}]);