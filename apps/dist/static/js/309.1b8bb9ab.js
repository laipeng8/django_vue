"use strict";(self["webpackChunkbpvank_front_end"]=self["webpackChunkbpvank_front_end"]||[]).push([[309],{309:function(e,r,o){o.r(r),o.d(r,{default:function(){return y}});var t=o(3396);const l=e=>((0,t.dD)("data-v-7889db64"),e=e(),(0,t.Cn)(),e),i={class:"loginBox"},a=l((()=>(0,t._)("a",{class:"login_logo"},null,-1))),n={class:"midgroup"},s={class:"loginwrap loginwarrp"},u={class:"logingroup login_form"},d=l((()=>(0,t._)("h2",{style:{"text-align":"center",color:"#2fa7b9"}},"注 册",-1))),c=["disabled","value"],m=(0,t.Uk)("立即注册 "),g=l((()=>(0,t._)("p",{style:{"font-size":"12px","text-align":"center",color:"#999"}},[(0,t.Uk)(" 已有账号，"),(0,t._)("a",{href:"/login",style:{color:"#2fa7b9"}},"立即登录")],-1))),p=l((()=>(0,t._)("footer",{style:{"text-align":"center"}},[(0,t._)("p",null,"相信有一天, 理想主义终将所向披靡.")],-1))),f=l((()=>(0,t._)("div",{class:"footer_copyright"},[(0,t._)("p",null," · Designed by Bpvank. All Rights Reserved. Copyright © 2022 Bpvank · ")],-1)));function w(e,r,o,l,w,v){const h=(0,t.up)("el-input"),_=(0,t.up)("el-form-item"),E=(0,t.up)("el-button"),b=(0,t.up)("el-form");return(0,t.wg)(),(0,t.iD)("div",i,[a,(0,t._)("div",n,[(0,t._)("div",s,[(0,t._)("div",u,[d,(0,t.Wm)(b,{ref:"ruleFormRef",model:e.ruleForm,"status-icon":"",rules:l.rules,"label-width":"120px",style:{"padding-top":"20px"},"label-position":"top",size:"large",class:"demo-ruleForm"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{prop:"registerName"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{"prefix-icon":l.User,modelValue:e.ruleForm.registerName,"onUpdate:modelValue":r[0]||(r[0]=r=>e.ruleForm.registerName=r),placeholder:"请输入用户名"},null,8,["prefix-icon","modelValue"])])),_:1}),(0,t.Wm)(_,{prop:"registerEmail"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{"prefix-icon":l.Message,modelValue:e.ruleForm.registerEmail,"onUpdate:modelValue":r[1]||(r[1]=r=>e.ruleForm.registerEmail=r),placeholder:"请输入电子邮箱"},null,8,["prefix-icon","modelValue"])])),_:1}),(0,t.Wm)(_,{prop:"registerPass"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{"prefix-icon":l.Lock,modelValue:e.ruleForm.registerPass,"onUpdate:modelValue":r[2]||(r[2]=r=>e.ruleForm.registerPass=r),"show-password":"",autocomplete:"off",placeholder:"请输入密码"},null,8,["prefix-icon","modelValue"])])),_:1}),(0,t.Wm)(_,{prop:"inputVerificationCode"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{"prefix-icon":l.Right,modelValue:e.ruleForm.inputVerificationCode,"onUpdate:modelValue":r[4]||(r[4]=r=>e.ruleForm.inputVerificationCode=r),placeholder:"邮箱验证码"},{append:(0,t.w5)((()=>[(0,t._)("input",{type:"button",plain:!0,onClick:r[3]||(r[3]=r=>l.getCode(e.formData)),disabled:!e.show,style:{width:"70px",height:"100%",border:"0px",background:"none",color:"#afacac"},value:e.codeText},null,8,c)])),_:1},8,["prefix-icon","modelValue"])])),_:1}),(0,t.Wm)(_,{prop:"loginBtn",class:"loginBtn"},{default:(0,t.w5)((()=>[(0,t.Wm)(E,{color:"#2fa7b9",plain:"",style:{width:"100%"},onClick:e.submitAddRegisterInfo},{default:(0,t.w5)((()=>[m])),_:1},8,["onClick"])])),_:1}),g])),_:1},8,["model","rules"]),p])])]),f])}o(1703);var v=o(4870),h=o(2748),_=o(7178),E=o(4775),b=o(6666),x=o(6265),F=o.n(x);const k=60;var C={setup(){const e=(0,v.iH)(""),r=(0,v.qj)({ruleForm:{registerName:"",registerEmail:"",registerPass:"",verificationCode:"",inputVerificationCode:""},loginUrl:location.protocol+"//"+location.host+"/login.html",show:!0,codeText:"获取验证码",count:"",timer:null,code:"",clearCount:"",timer2:null,affirmGet:!1});var o=/^[\u4e00-\u9fa5a-zA-Z0-9_]{2,8}$/,t=/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/,l=/^[a-zA-Z0-9_.-=*&^%$#@!+]{6,18}$/;const i=(e,r,t)=>{if(!r)return t(new Error("请填写此字段~"));if(o.test(r)){let e={registerName:r};F().get("/register/showUserName",{params:e}).then((e=>{1==e.data.code?t(new Error("此用户名已被注册，请更换一个")):t()}))}else t(new Error("用户名由2~8位中英文、数字、下划线组成"))},a=(e,r,o)=>{if(!r)return o(new Error("请填写此字段~"));l.test(r)?o():o(new Error("密码6~18位字母、数字、特殊字符组成"))},n=(e,r,o)=>{if(!r)return o(new Error("请填写此字段~"));if(t.test(r)){let e={registerEmail:r};F().get("/register/showUserEmail",{params:e}).then((e=>{console.log(e.data.isExistUserEmail),1==e.data.code?o(new Error("此邮箱已被注册，请更换一个")):o()}))}else o(new Error("请按照正确的邮箱格式输入"))},s=(o,t,l)=>{e.value.validateField("registerEmail",(e=>{if(e)if(r.affirmGet){if(!t)return l(new Error("请填写此字段~"));if(t!=r.code)return l(new Error("验证码有误，请重新输入"));l()}else if(!t)return l(new Error("获取验证码，填写此字段~"))}))},u=e=>{r.ruleForm.verificationCode=e},d=(0,v.qj)({registerName:[{validator:i,trigger:"blur"}],registerPass:[{validator:a,trigger:"blur"}],registerEmail:[{validator:n,trigger:"blur"}],inputVerificationCode:[{validator:s,trigger:"blur"}]});let c="";const m=o=>{r.affirmGet=!0,e.value.validateField("registerEmail",(e=>{if(!e)return _.z8.error("按要求填写电子邮箱后再获取验证码."),!1;{c=r.ruleForm.registerEmail;for(var o=0;o<6;o++)r.code+=Math.floor(10*Math.random());const e={registerEmail:r.ruleForm.registerEmail,content:"【赖鹏的个人博客】注册验证码："+r.code+"，请勿将验证码告知他人，有效期3分钟，请妥善保管。"};F().get("/sendEmail",{params:e}).then((e=>{0==e.data.code?r.timer||(r.count=k,r.show=!1,r.timer=setInterval((()=>{r.count>0&&r.count<=k?r.ruleForm.registerEmail==c?(r.count--,r.codeText=r.count+"s"):(r.show=!0,window.clearInterval(r.timer),r.timer=null,r.codeText="获取验证码",c="",r.code=""):(r.code="",r.show=!0,window.clearInterval(r.timer),r.timer=null,r.codeText="重新获取",c="")}),1e3)):_.z8.error("验证码获取失败.")}))}}))};function g(e){const o=()=>{e.value.validate((o=>{if(o){const o={userName:r.ruleForm.registerName,userPass:r.ruleForm.registerPass,userEmail:r.ruleForm.registerEmail,userCode:r.ruleForm.inputVerificationCode};F().post("/register/insertRegisterInfo",o).then((o=>{if(0===o.data.code){const o=E.kN.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout((()=>{o.close()}),1e3),setTimeout((()=>{(0,b.bM)({title:"注册成功",message:"登录即可访问Bpvank博客后台.",type:"success"}),e.value.resetFields(),r.show=!0,window.clearInterval(r.timer),r.timer=null,r.codeText="获取验证码",c="",r.code=""}),1200),setTimeout((()=>{window.location.href="/login"}),1800)}else _.z8.error("注册失败.")}))}}))};return{submitAddRegisterInfo:o}}return{...(0,v.BK)(r),getVerificationCode:u,getCode:m,rules:d,ruleFormRef:e,...g(e),User:h.User,Lock:h.Lock,Right:h.Right,Message:h.Message}}},V=o(89);const U=(0,V.Z)(C,[["render",w],["__scopeId","data-v-7889db64"]]);var y=U}}]);