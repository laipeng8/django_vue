"use strict";(self["webpackChunkbpvank_front_end"]=self["webpackChunkbpvank_front_end"]||[]).push([[431],{9431:function(e,o,t){t.r(o),t.d(o,{default:function(){return le}});var r=t(3396),n=t(7139);const s=e=>((0,r.dD)("data-v-e69c6e4e"),e=e(),(0,r.Cn)(),e),l={class:"reset_password_box"},a=s((()=>(0,r._)("a",{class:"reset_password_logo"},null,-1))),i={class:"midGroup"},d={class:"reset_password_group"},u={key:0},c=s((()=>(0,r._)("h2",null,"通过电子邮箱找回密码",-1))),p={key:1,style:{padding:"100px 0px"}},f=s((()=>(0,r._)("p",{style:{"font-size":"30px","font-weight":"600",color:"#2fa7b9","text-align":"center","line-height":"60px"}}," 密码重置成功",-1))),m={style:{"text-align":"center",color:"#999999","font-size":"14px"}},w={style:{"font-size":"12px",color:"#999"}},h=(0,r.Uk)(" 还没有账号，"),g={class:"rests_path"},_=(0,r.Uk)(" | "),v=s((()=>(0,r._)("footer",{style:{"text-align":"center"}},[(0,r._)("p",null,"相信有一天, 理想主义终将所向披靡.")],-1))),C=s((()=>(0,r._)("div",{class:"footer_copyright"},[(0,r._)("p",null," · Designed by Bpvank. All Rights Reserved. Copyright © 2022 Bpvank · ")],-1)));function k(e,o,t,s,k,y){const U=(0,r.up)("ConfirmAccount"),x=(0,r.up)("SafetyVerification"),I=(0,r.up)("ResetPassword");return(0,r.wg)(),(0,r.iD)("div",l,[a,(0,r._)("div",i,[(0,r._)("div",d,[e.componentsInfo.isShow?((0,r.wg)(),(0,r.iD)("div",u,[c,e.componentsInfo.confirmAccountIsShow?((0,r.wg)(),(0,r.j4)(U,{key:0,onSetUserInfo:s.getUserInfo},null,8,["onSetUserInfo"])):(0,r.kq)("",!0),e.componentsInfo.safetyVerificationIsShow?((0,r.wg)(),(0,r.j4)(x,{key:1,onSetPass:s.getPass,setUserEmail:e.userInfo.userEmail,setCode:e.code},null,8,["onSetPass","setUserEmail","setCode"])):(0,r.kq)("",!0),e.componentsInfo.resetPasswordIsShow?((0,r.wg)(),(0,r.j4)(I,{key:2,onUpdateSucceed:s.succeed,setUserName:e.userInfo.userName,setUserEmail:e.userInfo.userEmail},null,8,["onUpdateSucceed","setUserName","setUserEmail"])):(0,r.kq)("",!0)])):(0,r.kq)("",!0),e.componentsInfo.isShow?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",p,[f,(0,r._)("p",m,(0,n.zw)(e.count)+"秒后返回登录界面",1)])),(0,r._)("p",w,[h,(0,r._)("span",{onClick:o[0]||(o[0]=e=>s.toPath("/register")),style:{color:"#2fa7b9",cursor:"pointer"}},"立即注册"),(0,r._)("p",g,[(0,r._)("span",{onClick:o[1]||(o[1]=e=>s.toPath("/login"))},"返回登录"),_,(0,r._)("span",{onClick:o[2]||(o[2]=e=>s.toPath("/"))},"前往首页")])]),v])]),C])}const y=e=>((0,r.dD)("data-v-65027b72"),e=e(),(0,r.Cn)(),e),U=y((()=>(0,r._)("div",{class:"title"},[(0,r._)("span",null,"找回步骤："),(0,r._)("span",{style:{"font-size":"15px","font-weight":"600"}},"1. 确认账号"),(0,r.Uk)(" >   "),(0,r._)("span",null,"2.安全验证"),(0,r.Uk)("   >   "),(0,r._)("span",null,"3.重置密码"),(0,r.Uk)("  >   "),(0,r._)("span",null,"4. 成功")],-1))),x=(0,r.Uk)("下一步 ");function I(e,o,t,n,s,l){const a=(0,r.up)("el-input"),i=(0,r.up)("el-form-item"),d=(0,r.up)("VerificationCode"),u=(0,r.up)("el-button"),c=(0,r.up)("el-form");return(0,r.wg)(),(0,r.iD)(r.HY,null,[U,(0,r.Wm)(c,{ref:"ruleFormRef",model:e.ruleForm,"status-icon":"",rules:n.rules,"label-width":"120px",style:{"padding-top":"20px"},"label-position":"top",size:"large",class:"demo-ruleForm"},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{prop:"userNameOrEmail",label:"请填写您需要找回的用户名或者电子邮箱："},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{"prefix-icon":n.User,modelValue:e.ruleForm.userNameOrEmail,"onUpdate:modelValue":o[0]||(o[0]=o=>e.ruleForm.userNameOrEmail=o),placeholder:"请输入用户名或者电子邮箱"},null,8,["prefix-icon","modelValue"])])),_:1}),(0,r.Wm)(i,{prop:"inputVerificationCode",style:{width:"55%",float:"left"}},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{"prefix-icon":n.Right,modelValue:e.ruleForm.inputVerificationCode,"onUpdate:modelValue":o[1]||(o[1]=o=>e.ruleForm.inputVerificationCode=o),placeholder:"请输入验证码"},{append:(0,r.w5)((()=>[(0,r.Wm)(d,{ref:"player",onGetVerificationCode:n.getVerificationCode,title:"看不清？点击换一张"},null,8,["onGetVerificationCode"])])),_:1},8,["prefix-icon","modelValue"])])),_:1}),(0,r.Wm)(i,{prop:"loginBtn",class:"reset_password_btn"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{color:"#2fa7b9",plain:"",style:{width:"80%","margin-left":"20%"},onClick:e.nextStep},{default:(0,r.w5)((()=>[x])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])],64)}t(1703);function b(e,o,t,s,l,a){return(0,r.wg)(),(0,r.iD)("div",{class:"ValidCode disabled-select",style:(0,n.j5)(`width:${t.width}; height:${t.height};padding: 0px 10px;`),onClick:o[0]||(o[0]=(...e)=>s.refreshCode&&s.refreshCode(...e))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.codeList,((e,o)=>((0,r.wg)(),(0,r.iD)("span",{key:o,style:(0,n.j5)(s.getStyle(e))},(0,n.zw)(e.code),5)))),128))],4)}var S=t(4870),E={props:{width:{type:String,default:"80px"},height:{type:String,default:"40px"},length:{type:Number,default:4}},setup(e,{emit:o}){const t=(0,S.qj)({codeList:[]});(0,r.bv)((()=>{s()}));const n=()=>{s()},s=()=>{const r=e.length,n=[],s="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz0123456789",l=s.length;for(let e=0;e<r;e++){const e=[Math.round(220*Math.random()),Math.round(240*Math.random()),Math.round(200*Math.random())];n.push({code:s.charAt(Math.floor(Math.random()*l)),color:`rgb(${e})`,fontSize:`1${[Math.floor(10*Math.random())]}px`,padding:`${[Math.floor(10*Math.random())]}px`,transform:`rotate(${Math.floor(90*Math.random())-Math.floor(90*Math.random())}deg)`})}t.codeList=n,o("getVerificationCode",n.map((e=>e.code)).join(""))},l=e=>`color: ${e.color}; font-size: ${e.fontSize}; padding: ${e.padding}; transform: ${e.transform}`;return{...(0,S.BK)(t),onMounted:r.bv,refreshCode:n,createdCode:s,getStyle:l}}},F=t(89);const V=(0,F.Z)(E,[["render",b],["__scopeId","data-v-75463f62"]]);var P=V,z=t(2748),M=t(4775),W=t(7178),N=t(6265),j=t.n(N),D={components:{VerificationCode:P},setup(e,{emit:o}){const t=(0,S.iH)(null),r=(0,S.iH)(""),n=(0,S.qj)({ruleForm:{userNameOrEmail:"",verificationCode:"",inputVerificationCode:""},showUserInfo:null,code:""}),s=(e,o,t)=>{if(!o)return t(new Error("请填写此字段~"));{let e={userNameOrEmail:o};j().get("/resetPassword/showUserNameOrEmail",{params:e}).then((e=>{1==e.data.code?t(new Error("当前输入的用户未注册本平台")):(n.showUserInfo=e.data.data,t())}))}},l=(e,o,t)=>{r.value.validateField("userNameOrEmail",(e=>{if(e){if(!o)return t(new Error("请填写此字段~"));if(o.toLowerCase()!=n.ruleForm.verificationCode.toLowerCase())return t(new Error("嘿，验证码输入有误哟~"));t()}}))},a=e=>{n.ruleForm.verificationCode=e},i=(0,S.qj)({userNameOrEmail:[{validator:s,trigger:"blur"}],inputVerificationCode:[{validator:l,trigger:"blur"}]});function d(e){const r=()=>{e.value.validate((r=>{if(r){for(var s=0;s<6;s++)n.code+=Math.floor(10*Math.random());const r={resetEmail:n.showUserInfo.userEmail,code:n.code,content:"【赖鹏的个人博客】找回验证码："+n.code+"，此验证码用于重置密码，请勿将验证码告知他人，妥善保管。"};j().get("/sendEmailReset",{params:r}).then((r=>{if(0==r.data.code){let r={userInfo:n.showUserInfo,code:n.code};const s=M.kN.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout((()=>{s.close(),o("setUserInfo",r)}),1500),(0,S.SU)(t).refreshCode(),e.value.resetFields()}else(0,W.z8)({message:"糟糕，系统出错啦！请再输入一次注册邮箱",type:"warning"}),window.location.href="/resetPassword"}))}}))};return{nextStep:r}}return{...(0,S.BK)(n),getVerificationCode:a,...d(r),player:t,rules:i,ruleFormRef:r,User:z.User,Lock:z.Lock,Right:z.Right}}};const R=(0,F.Z)(D,[["render",I],["__scopeId","data-v-65027b72"]]);var q=R;const K=e=>((0,r.dD)("data-v-d2f7e8a6"),e=e(),(0,r.Cn)(),e),$=K((()=>(0,r._)("div",{class:"title"},[(0,r._)("span",null,"找回步骤："),(0,r._)("span",null,"1. 确认账号"),(0,r.Uk)(" >   "),(0,r._)("span",{style:{"font-size":"15px","font-weight":"600"}},"2.安全验证"),(0,r.Uk)("  >   "),(0,r._)("span",null,"3.重置密码"),(0,r.Uk)("  >   "),(0,r._)("span",null,"4. 成功")],-1))),B={style:{color:"#606266","margin-bottom":"12px","font-size":"14px"}},L=(0,r.Uk)(" 您的帐号可能存在安全风险，为了确保为您本人操作，请先进行安全验证。 "),A=(0,r.Uk)("下一步");function H(e,o,t,s,l,a){const i=(0,r.up)("el-input"),d=(0,r.up)("el-form-item"),u=(0,r.up)("el-button"),c=(0,r.up)("el-form");return(0,r.wg)(),(0,r.iD)(r.HY,null,[$,(0,r.Wm)(c,{ref:"ruleFormRef",model:e.ruleForm,"status-icon":"",rules:s.rules,"label-width":"120px",style:{"padding-top":"20px"},"label-position":"top",size:"large",class:"demo-ruleForm"},{default:(0,r.w5)((()=>[(0,r._)("p",B,[L,(0,r._)("p",null,"我们已向您的邮箱"+(0,n.zw)(e.userEmail)+"发送了一条验证码。",1)]),(0,r.Wm)(d,{prop:"verificationCode",style:{width:"55%",float:"left"}},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{"prefix-icon":s.Key,modelValue:e.ruleForm.verificationCode,"onUpdate:modelValue":o[0]||(o[0]=o=>e.ruleForm.verificationCode=o),placeholder:"请输入六位数验证码"},null,8,["prefix-icon","modelValue"])])),_:1}),(0,r.Wm)(d,{prop:"nextStepBtn",class:"reset_password_btn"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{color:"#2fa7b9",plain:"",style:{width:"80%","margin-left":"20%"},onClick:e.nextStep},{default:(0,r.w5)((()=>[A])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])],64)}var O=t(6666),Z={components:{},props:{setUserEmail:String,setCode:String},setup(e,{emit:o}){const t=(0,S.iH)(""),r=(0,S.qj)({ruleForm:{verificationCode:""},userEmail:e.setUserEmail,code:e.setCode});r.userEmail=r.userEmail.substr(0,2)+"***"+r.userEmail.substr(5,r.userEmail.split("").length);const n=(e,o,t)=>{if(!o)return t(new Error("请填写此字段~"));t()},s=(0,S.qj)({verificationCode:[{validator:n,trigger:"blur"}]});function l(e){const t=()=>{e.value.validate((t=>{if(t)if(r.ruleForm.verificationCode==r.code){let t=1;o("setPass",t),(0,O.bM)({title:"提示",message:"验证通过，按要求填写输入框重置密码",type:"success"}),e.value.resetFields()}else W.z8.error("您当前输入的验证码有误"),r.ruleForm.verificationCode=""}))};return{nextStep:t}}return{...(0,S.BK)(r),...l(t),rules:s,ruleFormRef:t,Key:z.Key}}};const Y=(0,F.Z)(Z,[["render",H],["__scopeId","data-v-d2f7e8a6"]]);var G=Y;const T=e=>((0,r.dD)("data-v-34244fcd"),e=e(),(0,r.Cn)(),e),J=T((()=>(0,r._)("div",{class:"title"},[(0,r._)("span",null,"找回步骤："),(0,r._)("span",null,"1. 确认账号"),(0,r.Uk)(" >   "),(0,r._)("span",null,"2.安全验证"),(0,r.Uk)("  >   "),(0,r._)("span",{style:{"font-size":"15px","font-weight":"600"}},"3.重置密码"),(0,r.Uk)("  >   "),(0,r._)("span",null,"4. 成功")],-1))),Q={style:{color:"#606266","margin-bottom":"12px","font-size":"14px"}},X=(0,r.Uk)("重置密码");function ee(e,o,t,s,l,a){const i=(0,r.up)("el-input"),d=(0,r.up)("el-form-item"),u=(0,r.up)("el-button"),c=(0,r.up)("el-form");return(0,r.wg)(),(0,r.iD)(r.HY,null,[J,(0,r.Wm)(c,{ref:"ruleFormRef",model:e.ruleForm,"status-icon":"",rules:s.rules,"label-width":"100px",style:{"padding-top":"20px"},size:"large",class:"demo-ruleForm"},{default:(0,r.w5)((()=>[(0,r._)("p",Q," 您正在找回的帐号是："+(0,n.zw)(t.setUserName),1),(0,r.Wm)(d,{prop:"password",label:"新密码："},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{"prefix-icon":s.Lock,modelValue:e.ruleForm.password,"onUpdate:modelValue":o[0]||(o[0]=o=>e.ruleForm.password=o),placeholder:"请输入新密码","show-password":"",autocomplete:"off"},null,8,["prefix-icon","modelValue"])])),_:1}),(0,r.Wm)(d,{prop:"confirmPassword",label:"确认新密码："},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{"prefix-icon":s.Key,modelValue:e.ruleForm.confirmPassword,"onUpdate:modelValue":o[1]||(o[1]=o=>e.ruleForm.confirmPassword=o),placeholder:"请确认新密码","show-password":"",autocomplete:"off"},null,8,["prefix-icon","modelValue"])])),_:1}),(0,r.Wm)(d,{prop:"loginBtn",class:"reset_password_btn"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{color:"#2fa7b9",plain:"",onClick:e.nextStep,style:{width:"100%"}},{default:(0,r.w5)((()=>[X])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])],64)}var oe={components:{},props:{setUserName:String,setUserEmail:String},setup(e,{emit:o}){const t=(0,S.iH)(""),r=(0,S.qj)({ruleForm:{password:"",confirmPassword:""},userEmail:e.setUserEmail});var n=/^[a-zA-Z0-9_.-=*&^%$#@!+]{6,18}$/;const s=(e,o,r)=>{if(!o)return r(new Error("请填写此字段~"));if(o)if(n.test(o)){if(!t.value)return;t.value.validateField("confirmPassword",(()=>null))}else r(new Error("密码6~18位字母、数字、特殊字符组成"));r()},l=(e,o,t)=>{""===o?t(new Error("请填写此字段~")):o!==r.ruleForm.password?t(new Error("您输入的密码与确认密码不一致")):t()},a=(0,S.qj)({password:[{validator:s,trigger:"blur"}],confirmPassword:[{validator:l,trigger:"blur"}]});function i(e){const t=()=>{e.value.validate((t=>{if(t){let t={userPass:r.ruleForm.confirmPassword,userEmail:r.userEmail};j().get("/resetPassword/updateUserPass",{params:t}).then((t=>{0==t.data.code?(o("updateSucceed",t.data.code),e.value.resetFields()):((0,W.z8)({message:"糟糕，系统出错啦！耐心的再来一遍吧",type:"warning"}),window.location.href="/resetPassword")}))}}))};return{nextStep:t}}return{...(0,S.BK)(r),...i(t),rules:a,ruleFormRef:t,Lock:z.Lock,Key:z.Key}}};const te=(0,F.Z)(oe,[["render",ee],["__scopeId","data-v-34244fcd"]]);var re=te,ne={components:{ConfirmAccount:q,SafetyVerification:G,ResetPassword:re},setup(){const e=e=>{window.location.href=e},o=(0,S.qj)({componentsInfo:{isShow:!0,confirmAccountIsShow:!0,safetyVerificationIsShow:!1,resetPasswordIsShow:!1},userInfo:{},code:"",count:"",timer:null}),t=e=>{o.userInfo=e.userInfo,o.code=e.code,o.componentsInfo.confirmAccountIsShow=!1,o.componentsInfo.safetyVerificationIsShow=!0},r=e=>{o.componentsInfo.safetyVerificationIsShow=!1,o.componentsInfo.resetPasswordIsShow=!0};let n=3;const s=e=>{o.componentsInfo.resetPasswordIsShow=!1,o.componentsInfo.isShow=!1,o.timer||(o.count=n,o.timer=setInterval((()=>{o.count>1&&o.count<=n?o.count--:(clearInterval(o.timer),o.timer=null,window.location.href="/login")}),1e3))};return{...(0,S.BK)(o),getUserInfo:t,getPass:r,succeed:s,toPath:e}}};const se=(0,F.Z)(ne,[["render",k],["__scopeId","data-v-e69c6e4e"]]);var le=se}}]);