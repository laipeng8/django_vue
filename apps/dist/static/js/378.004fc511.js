"use strict";(self["webpackChunkbpvank_front_end"]=self["webpackChunkbpvank_front_end"]||[]).push([[378],{6378:function(e,l,a){a.r(l),a.d(l,{default:function(){return De}});var t=a(3396),i=a(9242),o=a(7139);const r={class:"card-header"},n=(0,t.Uk)("链接管理 "),u={class:"hidden-sm-and-down"},d=(0,t.Uk)("添加链接"),s={class:"visible"},m={style:{display:"inline-flex","justify-content":"center","align-items":"center"}},c={class:"el-dropdown-link",style:{color:"#2fa7b9","font-size":"16px","margin-right":"15px"},title:"菜单"},p=(0,t.Uk)("搜索内容 "),g=(0,t.Uk)("添加链接 "),f={class:"highlight"},k={key:0},w={key:1},b={key:0,style:{color:"#E6A23C"}},h={key:1,style:{color:"#67C23A"}},_={key:2,style:{color:"#F56C6C"}},V=(0,t.Uk)("审核"),L=(0,t.Uk)("删除"),v={class:"el-pagination__total is-first"};function y(e,l,a,y,W,D){const C=(0,t.up)("Link"),U=(0,t.up)("el-icon"),z=(0,t.up)("el-input"),x=(0,t.up)("el-col"),A=(0,t.up)("el-option"),P=(0,t.up)("el-select"),E=(0,t.up)("el-button"),F=(0,t.up)("Refresh"),I=(0,t.up)("el-row"),S=(0,t.up)("Grid"),N=(0,t.up)("el-dropdown-item"),R=(0,t.up)("el-dropdown-menu"),q=(0,t.up)("el-dropdown"),T=(0,t.up)("el-table-column"),j=(0,t.up)("el-tooltip"),B=(0,t.up)("el-image"),M=(0,t.up)("el-popconfirm"),$=(0,t.up)("el-table"),O=(0,t.up)("el-pagination"),H=(0,t.up)("el-card"),K=(0,t.up)("AddLink"),Y=(0,t.up)("AuditLink"),Z=(0,t.Q2)("loading");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(H,{class:"box-card"},{header:(0,t.w5)((()=>[(0,t._)("div",r,[(0,t._)("h3",null,[(0,t.Wm)(U,{style:{"margin-right":"10px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(C)])),_:1}),n]),(0,t._)("div",u,[(0,t.Wm)(I,{gutter:10},{default:(0,t.w5)((()=>[(0,t.Wm)(x,{span:10},{default:(0,t.w5)((()=>[(0,t.Wm)(z,{"prefix-icon":y.Search,modelValue:e.searchValue,"onUpdate:modelValue":l[0]||(l[0]=l=>e.searchValue=l),onKeyup:(0,i.D2)(y.search,["enter","native"]),placeholder:"关键字搜索（回车）"},null,8,["prefix-icon","modelValue","onKeyup"])])),_:1}),(0,t.Wm)(x,{span:6},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{modelValue:e.auditValue,"onUpdate:modelValue":l[1]||(l[1]=l=>e.auditValue=l),placeholder:"审核筛选"},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{label:"全部",value:"0"}),(0,t.Wm)(A,{label:"待审核",value:"1"}),(0,t.Wm)(A,{label:"已通过",value:"2"}),(0,t.Wm)(A,{label:"已拒绝",value:"3"})])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(x,{span:5},{default:(0,t.w5)((()=>[(0,t.Wm)(E,{plain:"",style:{width:"100%"},color:"#2fa7b9",onClick:y.addLink},{default:(0,t.w5)((()=>[d])),_:1},8,["onClick"])])),_:1}),(0,t.Wm)(x,{span:3,style:{display:"inline-flex","justify-content":"center","align-items":"center"}},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{style:{"font-size":"20px",color:"#b3b6bc"},onClick:y.refresh},{default:(0,t.w5)((()=>[(0,t.Wm)(F)])),_:1},8,["onClick"])])),_:1})])),_:1})]),(0,t._)("div",s,[(0,t._)("p",m,[(0,t.Wm)(q,{style:{"line-height":"0px"},"hide-on-click":!1,trigger:"click"},{dropdown:(0,t.w5)((()=>[(0,t.Wm)(R,{class:"visible"},{default:(0,t.w5)((()=>[(0,t.Wm)(N,null,{default:(0,t.w5)((()=>[(0,t.Wm)(P,{modelValue:e.auditValue,"onUpdate:modelValue":l[2]||(l[2]=l=>e.auditValue=l),placeholder:"审核筛选"},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{label:"全部",value:"0"}),(0,t.Wm)(A,{label:"待审核",value:"1"}),(0,t.Wm)(A,{label:"已通过",value:"2"}),(0,t.Wm)(A,{label:"已拒绝",value:"3"})])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(N,null,{default:(0,t.w5)((()=>[(0,t.Wm)(E,{plain:"",style:{width:"100%"},color:"#2fa7b9",onClick:y.openSearch},{default:(0,t.w5)((()=>[p])),_:1},8,["onClick"])])),_:1}),(0,t.Wm)(N,null,{default:(0,t.w5)((()=>[(0,t.Wm)(E,{plain:"",style:{width:"100%"},color:"#2fa7b9",onClick:y.addLink},{default:(0,t.w5)((()=>[g])),_:1},8,["onClick"])])),_:1})])),_:1})])),default:(0,t.w5)((()=>[(0,t._)("span",c,[(0,t.Wm)(U,null,{default:(0,t.w5)((()=>[(0,t.Wm)(S)])),_:1})])])),_:1}),(0,t.Wm)(U,{onClick:y.refresh},{default:(0,t.w5)((()=>[(0,t.Wm)(F)])),_:1},8,["onClick"])])])])])),default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.wy)(((0,t.wg)(),(0,t.j4)($,{"element-loading-text":"玩命加载中...",data:e.tableData,style:{width:"100%","text-align":"center"},"cell-style":{textAlign:"center"},"header-cell-style":{fontSize:"15px",background:"#2fa7b9",color:"white",textAlign:"center"}},{default:(0,t.w5)((()=>[(0,t.Wm)(T,{label:"序号",width:"100",type:"index",index:y.Nindex},null,8,["index"]),(0,t.Wm)(T,{label:"名称"},{default:(0,t.w5)((e=>[(0,t.Wm)(j,{content:e.row.urlName,placement:"top",effect:"light"},{default:(0,t.w5)((()=>[(0,t._)("span",f,(0,o.zw)(e.row.urlName),1)])),_:2},1032,["content"])])),_:1}),(0,t.Wm)(T,{label:"地址"},{default:(0,t.w5)((e=>[(0,t.Wm)(j,{content:e.row.urlAddres,placement:"top",effect:"light"},{default:(0,t.w5)((()=>[(0,t._)("span",null,(0,o.zw)(e.row.urlAddres),1)])),_:2},1032,["content"])])),_:1}),(0,t.Wm)(T,{label:"类型"},{default:(0,t.w5)((e=>[1==e.row.urlType?((0,t.wg)(),(0,t.iD)("div",k,"推荐网站")):(0,t.kq)("",!0),2==e.row.urlType?((0,t.wg)(),(0,t.iD)("div",w,"友情链接")):(0,t.kq)("",!0)])),_:1}),(0,t.Wm)(T,{label:"缩略图"},{default:(0,t.w5)((e=>[(0,t.Wm)(B,{style:{width:"70px"},src:y.url+e.row.urlLitimg,fit:"cover","preview-teleported":"true","preview-src-list":[y.url+e.row.urlLitimg],title:e.row.urlName},null,8,["src","preview-src-list","title"])])),_:1}),(0,t.Wm)(T,{label:"站长邮箱"},{default:(0,t.w5)((e=>[(0,t.Wm)(j,{content:e.row.webmasterEmail,placement:"top",effect:"light"},{default:(0,t.w5)((()=>[(0,t._)("span",null,(0,o.zw)(e.row.webmasterEmail),1)])),_:2},1032,["content"])])),_:1}),(0,t.Wm)(T,{label:"审核状态"},{default:(0,t.w5)((e=>[1==e.row.urlPass?((0,t.wg)(),(0,t.iD)("div",b,"待审核")):(0,t.kq)("",!0),2==e.row.urlPass?((0,t.wg)(),(0,t.iD)("div",h,"已通过")):(0,t.kq)("",!0),3==e.row.urlPass?((0,t.wg)(),(0,t.iD)("div",_,"已拒绝")):(0,t.kq)("",!0)])),_:1}),(0,t.Wm)(T,{label:"操作"},{default:(0,t.w5)((l=>[(0,t.Wm)(E,{size:"small",onClick:e=>y.auditLink(l.$index,l.row),style:{margin:"0 0 10px 10px"}},{default:(0,t.w5)((()=>[V])),_:2},1032,["onClick"]),(0,t.Wm)(M,{"confirm-button-text":"确定","cancel-button-text":"取消",icon:y.Delete,"icon-color":"#626AEF",title:"确定删除“"+l.row.urlName+"”链接吗？",onConfirm:a=>e.handleDelete(l.$index,l.row)},{reference:(0,t.w5)((()=>[(0,t.Wm)(E,{size:"small",type:"danger",style:{"margin-bottom":"10px"}},{default:(0,t.w5)((()=>[L])),_:1})])),_:2},1032,["icon","title","onConfirm"])])),_:1})])),_:1},8,["data"])),[[Z,e.loading]]),(0,t._)("div",null,[(0,t.wy)((0,t.Wm)(O,{background:"",modelValue:e.currentPage,"onUpdate:modelValue":l[3]||(l[3]=l=>e.currentPage=l),modelModifiers:{"sync:current-page":!0},"page-size":6,"page-sizes":[6],layout:"slot, prev, pager, next, sizes, jumper",total:e.total,onSizeChange:e.handleSizeChange,onCurrentChange:y.changePage,currentPage:e.currentPage,"onUpdate:currentPage":l[4]||(l[4]=l=>e.currentPage=l)},{default:(0,t.w5)((()=>[(0,t._)("span",v," 共 "+(0,o.zw)(e.total)+" 条记录 当前显示第 "+(0,o.zw)(e.currentPage)+" 页记录 ",1)])),_:1},8,["modelValue","total","onSizeChange","onCurrentChange","currentPage"]),[[i.F8,e.total>6]])])])])),_:1}),(0,t.Wm)(K,{addLinkDialogFormVisible:e.dialogFormVisible.addLinkDialogFormVisible,onOnAddLinkCloseDialog:y.addLinkCloseDialogVisible},null,8,["addLinkDialogFormVisible","onOnAddLinkCloseDialog"]),(0,t.Wm)(Y,{auditLinkInfo:e.auditLinkInfo,auditLinkDialogFormVisible:e.dialogFormVisible.auditLinkDialogFormVisible,onOnAuditLinkCloseDialog:y.auditLinkCloseDialogVisible},null,8,["auditLinkInfo","auditLinkDialogFormVisible","onOnAuditLinkCloseDialog"])],64)}const W=e=>((0,t.dD)("data-v-01db8f1e"),e=e(),(0,t.Cn)(),e),D=["src"],C={key:2,class:"el-upload__text"},U=(0,t.Uk)(" 图片拖拽此处或者"),z=W((()=>(0,t._)("em",null,"点击上传",-1))),x=[U,z],A=["src"],P={class:"dialog-footer"},E=(0,t.Uk)("取消"),F=(0,t.Uk)("添加");function I(e,l,a,i,o,r){const n=(0,t.up)("el-input"),u=(0,t.up)("el-form-item"),d=(0,t.up)("el-option"),s=(0,t.up)("el-select"),m=(0,t.up)("upload-filled"),c=(0,t.up)("el-icon"),p=(0,t.up)("el-dialog"),g=(0,t.up)("el-upload"),f=(0,t.up)("el-form"),k=(0,t.up)("el-button");return(0,t.wg)(),(0,t.j4)(p,{modelValue:a.addLinkDialogFormVisible,"onUpdate:modelValue":l[7]||(l[7]=e=>a.addLinkDialogFormVisible=e),title:"添加链接",width:"400px",center:"",onClose:l[8]||(l[8]=e=>i.addLinkCloseDialog(!1))},{footer:(0,t.w5)((()=>[(0,t._)("span",P,[(0,t.Wm)(k,{onClick:l[6]||(l[6]=e=>i.addLinkCloseDialog(!1))},{default:(0,t.w5)((()=>[E])),_:1}),(0,t.Wm)(k,{plain:"",color:"#2fa7b9",onClick:e.submitAdd},{default:(0,t.w5)((()=>[F])),_:1},8,["onClick"])])])),default:(0,t.w5)((()=>[(0,t.Wm)(f,{ref:"ruleFormRef",model:e.form,rules:i.rules},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{prop:"urlName",label:"网站名称："},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{modelValue:e.form.urlName,"onUpdate:modelValue":l[0]||(l[0]=l=>e.form.urlName=l),placeholder:"请输入网站名称"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(u,{prop:"urlAddres",label:"网站地址："},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{modelValue:e.form.urlAddres,"onUpdate:modelValue":l[1]||(l[1]=l=>e.form.urlAddres=l),placeholder:"请输入网站地址"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(u,{prop:"urlReferral",label:"网站介绍："},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{modelValue:e.form.urlReferral,"onUpdate:modelValue":l[2]||(l[2]=l=>e.form.urlReferral=l),placeholder:"请输入网站介绍",maxlength:"50","show-word-limit":""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(u,{prop:"urlType",label:"网站类型："},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:e.form.urlType,"onUpdate:modelValue":l[3]||(l[3]=l=>e.form.urlType=l),placeholder:"请选择网站类型"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{label:"学习网站",value:"1"}),(0,t.Wm)(d,{label:"友情链接",value:"2"})])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(u,{prop:"urlLitimg",label:"网站首页："},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{ref:"uploadEle",style:{width:"100%",height:"150px"},class:"upload-demo",drag:"",action:e.uploadURL,"on-success":i.handleAvatarSuccess,"before-upload":i.beforeUploadFunction,"on-preview":i.handlePictureCardPreview},{default:(0,t.w5)((()=>[e.imageUrl?((0,t.wg)(),(0,t.iD)("img",{key:0,"w-full":"",src:e.imageUrl,class:"avatar",style:{height:"100%","object-fit":"cover"}},null,8,D)):(0,t.kq)("",!0),e.imageUrl?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(c,{key:1,class:"el-icon--upload"},{default:(0,t.w5)((()=>[(0,t.Wm)(m)])),_:1})),e.imageUrl?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",C,x)),(0,t.Wm)(p,{modelValue:i.dialogVisible,"onUpdate:modelValue":l[4]||(l[4]=e=>i.dialogVisible=e)},{default:(0,t.w5)((()=>[(0,t._)("img",{"w-full":"",src:e.imageUrl,alt:"Preview Image"},null,8,A)])),_:1},8,["modelValue"])])),_:1},8,["action","on-success","before-upload","on-preview"])])),_:1}),(0,t.Wm)(u,{prop:"webmasterEmail",label:"站长邮箱："},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{modelValue:e.form.webmasterEmail,"onUpdate:modelValue":l[5]||(l[5]=l=>e.form.webmasterEmail=l),placeholder:"请输入站长邮箱"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])}a(1703);var S=a(4870),N=a(7178),R=a(6265),q=a.n(R),T={props:{addLinkDialogFormVisible:Boolean},emits:["onAddLinkCloseDialog"],setup(e,{emit:l}){const a=(0,S.iH)(null),i=(0,S.iH)(""),o=(0,S.qj)({addLinkDialogFormVisible:e.addLinkDialogFormVisible,form:{urlName:"",urlAddres:"",urlReferral:"",urlType:"",urlLitimg:"",webmasterEmail:""},uploadURL:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_URL+"/fileUpload",imageUrl:""}),r=(e,l,a)=>{if(!l)return a(new Error("请填写此字段~"));a()};var n=new RegExp("^((https|http|ftp|rtsp|mms)?://)+(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}\\.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+\\.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z]\\.[a-z]{2,6})(:[0-9]{1,5})?((/?)|(/[0-9a-zA-Z_!~*'().;?:@&=+$,%#-]+)+/?)$");const u=(e,l,a)=>{if(!l)return a(new Error("请填写此字段~"));n.test(l)?a():a(new Error("请按照URL标准格式填写，必须包含http/https"))},d=(e,l,a)=>{if(!l)return a(new Error("请填写此字段~"));a()},s=(e,l,a)=>{if(!l)return a(new Error("请填写此字段~"));a()},m=(e,l,a)=>{if(""==o.imageUrl)return a(new Error("网站缩略图未上传成功，上传后再添加哟~"));a()};var c=/^\w+@[\da-z\.-]+\.([a-z]{2,6}|[\u2E80-\u9FFF]{2,3})$/;const p=(e,l,a)=>{if(!l)return a(new Error("请填写此字段~"));c.test(l)?a():a(new Error("请按照正确的邮箱格式输入"))},g=(0,S.qj)({urlName:[{validator:r,trigger:"blur"}],urlAddres:[{validator:u,trigger:"blur"}],urlReferral:[{validator:d,trigger:"blur"}],urlType:[{validator:s,trigger:"blur"}],urlLitimg:[{validator:m,trigger:"blur"}],webmasterEmail:[{validator:p,trigger:"blur"}]}),f=e=>(console.log(e.type),"image/jpeg"!==e.type&&"image/jpg"!==e.type&&"image/png"!==e.type&&"image/gif"!==e.type?(N.z8.error("仅支持图片格式.png | .jpg | .jpeg | .gif "),!1):!(e.size/1024/1024>5)||(N.z8.error("仅支持大小不超过5MB的图片!"),!1)),k=e=>{console.log(e),o.imageUrl={NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_URL+e,a.value.clearFiles()},w=(0,S.iH)(!0);w.value=!1,(0,t.Y3)((()=>{w.value=!0}));const b=e=>{l("onAddLinkCloseDialog",e),a.value.clearFiles(),i.value.resetFields(),o.imageUrl=""};function h(e){const t=()=>{e.value.validate((t=>{if(t){const t=o.imageUrl.replace({NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_URL,""),i={urlName:o.form.urlName,urlAddres:o.form.urlAddres,urlReferral:o.form.urlReferral,urlType:o.form.urlType,urlLitimg:t,webmasterEmail:o.form.webmasterEmail};q().post("/url/showAllUrlInfo",i).then((t=>{console.log(t),0==t.data.code&&(l("onAddLinkCloseDialog",!1,t.data),e.value.resetFields(),a.value.clearFiles())}))}}))};return{submitAdd:t}}const _=(0,S.iH)(!1),V=e=>{a.value=e.url,_.value=!0};return{...(0,S.BK)(o),rules:g,uploadEle:a,beforeUploadFunction:f,addLinkCloseDialog:b,handleAvatarSuccess:k,...h(i),dialogVisible:_,handlePictureCardPreview:V,ruleFormRef:i,isRouterAlive:w}}},j=a(89);const B=(0,j.Z)(T,[["render",I],["__scopeId","data-v-01db8f1e"]]);var M=B;const $=e=>((0,t.dD)("data-v-a28346d0"),e=e(),(0,t.Cn)(),e),O={style:{"margin-bottom":"10px","line-height":"25px"}},H=(0,t.Uk)(" 链接名称："),K={style:{color:"#2fa7b9"}},Y={style:{"margin-bottom":"10px","line-height":"25px"}},Z=(0,t.Uk)(" 链接地址："),G=["href"],Q={style:{"margin-bottom":"10px","line-height":"25px"}},J=(0,t.Uk)(" 链接介绍："),X={style:{color:"#2fa7b9"}},ee={style:{"margin-bottom":"10px","line-height":"25px"}},le=(0,t.Uk)(" 站长邮箱： "),ae=["href"],te={style:{"margin-bottom":"10px","line-height":"25px"}},ie=(0,t.Uk)(" 申请类型： "),oe={key:0,style:{color:"#2fa7b9"}},re={key:1,style:{color:"#2fa7b9"}},ne={style:{"margin-bottom":"10px","line-height":"25px"}},ue=(0,t.Uk)(" 审核结果： "),de=$((()=>(0,t._)("p",{style:{"text-align":"center",color:"#9f9f9f","line-height":"25px"}}," 审核结果系统将会自动下发至站长邮箱 ",-1))),se={class:"dialog-footer"},me=(0,t.Uk)("取消"),ce=(0,t.Uk)("确定");function pe(e,l,a,i,r,n){const u=(0,t.up)("el-option"),d=(0,t.up)("el-select"),s=(0,t.up)("el-button"),m=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.j4)(m,{modelValue:a.auditLinkDialogFormVisible,"onUpdate:modelValue":l[2]||(l[2]=e=>a.auditLinkDialogFormVisible=e),title:"审核链接",width:"400px",center:"",onClose:l[3]||(l[3]=e=>i.auditLinkCloseDialog(!1))},{footer:(0,t.w5)((()=>[(0,t._)("span",se,[(0,t.Wm)(s,{onClick:l[1]||(l[1]=e=>i.auditLinkCloseDialog(!1))},{default:(0,t.w5)((()=>[me])),_:1}),(0,t.Wm)(s,{plain:"",color:"#2fa7b9",onClick:i.submitConfirm},{default:(0,t.w5)((()=>[ce])),_:1},8,["onClick"])])])),default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t._)("p",O,[H,(0,t._)("span",K,(0,o.zw)(a.auditLinkInfo.urlName),1)]),(0,t._)("p",Y,[Z,(0,t._)("a",{style:{color:"#2fa7b9"},underline:!1,href:a.auditLinkInfo.urlAddres,target:"_blank"},(0,o.zw)(a.auditLinkInfo.urlAddres)+"（点击前往）",9,G)]),(0,t._)("p",Q,[J,(0,t._)("span",X,(0,o.zw)(a.auditLinkInfo.urlReferral),1)]),(0,t._)("p",ee,[le,(0,t._)("a",{style:{color:"#2fa7b9"},href:"http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email="+a.auditLinkInfo.webmasterEmail,target:"_blank"},(0,o.zw)(a.auditLinkInfo.webmasterEmail)+"（点击联系站长）",9,ae)]),(0,t._)("p",te,[ie,1==a.auditLinkInfo.urlType?((0,t.wg)(),(0,t.iD)("span",oe,"推荐网站")):(0,t.kq)("",!0),2==a.auditLinkInfo.urlType?((0,t.wg)(),(0,t.iD)("span",re,"友情链接")):(0,t.kq)("",!0)]),(0,t._)("p",ne,[ue,(0,t.Wm)(d,{modelValue:e.value,"onUpdate:modelValue":l[0]||(l[0]=l=>e.value=l),class:"m-2",placeholder:"请选择审核结果",size:"large",style:{width:"75%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{label:"待审核",value:1}),(0,t.Wm)(u,{label:"通过",value:2}),(0,t.Wm)(u,{label:"拒绝",value:3})])),_:1},8,["modelValue"])]),de])])),_:1},8,["modelValue"])}var ge=a(4775),fe=a(6666),ke={props:["auditLinkDialogFormVisible","auditLinkInfo"],emits:["onAuditLinkCloseDialog"],setup(e,{emit:l}){const a=(0,S.qj)({auditLinkDialogFormVisible:e.auditLinkDialogFormVisible,auditLinkInfo:e.auditLinkInfo,value:null});(0,t.YP)((()=>e.auditLinkInfo),((e,l)=>{a.auditLinkInfo=e}));const i=e=>{l("onAuditLinkCloseDialog",e),a.value=null},o=()=>{let e=ge.kN.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});if(null==a.value||a.value==a.auditLinkInfo.urlPass)setTimeout((()=>{e.close(),(0,fe.bM)({title:"提示",message:"未发生改变的操作",type:"success"}),a.value=null,l("onAuditLinkCloseDialog",!1)}),500);else if(1==a.value){const t={urlId:a.auditLinkInfo.urlId,urlPass:a.value};q().get("/url/updateUrlPass",{params:t}).then((t=>{0==t.data.code&&setTimeout((()=>{e.close(),(0,fe.bM)({title:"提示",message:"已审核成功",type:"success"}),a.value=null,l("onAuditLinkCloseDialog",!1,t.data)}),1e3)}))}else if(2==a.value){const t={urlId:a.auditLinkInfo.urlId,urlPass:a.value};q().get("/url/updateUrlPass",{params:t}).then((t=>{if(0==t.data.code){const t={registerEmail:a.auditLinkInfo.webmasterEmail,content:"您好，"+a.auditLinkInfo.urlName+"("+a.auditLinkInfo.urlAddres+")站长，您在Bpvank博客中申请添加链接已通过，合作共赢！"};q().get("/sendEmail",{params:t}).then((t=>{0==t.data.code&&setTimeout((()=>{e.close(),(0,fe.bM)({title:"提示",message:"已审核成功",type:"success"}),a.value=null,l("onAuditLinkCloseDialog",!1,t.data)}),1e3)}))}}))}else if(3==a.value){const t={urlId:a.auditLinkInfo.urlId,urlPass:a.value};q().get("/url/updateUrlPass",{params:t}).then((t=>{if(0==t.data.code){const t={registerEmail:a.auditLinkInfo.webmasterEmail,content:"您好，"+a.auditLinkInfo.urlName+"("+a.auditLinkInfo.urlAddres+")站长，您在赖鹏的个人博客中申请添加链接失败。申请内容有误或站点内容不合适与本站建立连接，期待您更好的展现站点，再与我们合作，谢谢！"};q().get("/sendEmail",{params:t}).then((t=>{0==t.data.code&&setTimeout((()=>{e.close(),(0,fe.bM)({title:"提示",message:"已审核成功",type:"success"}),a.value=null,l("onAuditLinkCloseDialog",!1,t.data)}),1e3)}))}}))}};return{...(0,S.BK)(a),auditLinkCloseDialog:i,submitConfirm:o}}};const we=(0,j.Z)(ke,[["render",pe],["__scopeId","data-v-a28346d0"]]);var be=we,he=a(2748),_e=a(2655);function Ve(e){e.loading=!0;var l={currentPage:e.currentPage,pageSize:e.pageSize};q().get("/url/page/findby",{params:l}).then((l=>{e.tableData=l.data.data.list,e.total=l.data.data.total,e.pageSize=l.data.data.pageSize,e.currentPage=l.data.data.currentPage,e.loading=!1}))}function Le(e){e.loading=!0;const l={currentPage:e.currentPage,pageSize:e.pageSize,searchContent:e.searchValue};q().get("/url/page/findby",{params:l}).then((l=>{e.tableData=l.data.data.list,e.total=l.data.data.total,e.pageSize=l.data.data.pageSize,e.currentPage=l.data.data.currentPage,e.loading=!1}))}function ve(e){e.loading=!0;const l={currentPage:e.currentPage,pageSize:e.pageSize,auditContent:0==e.auditValue?"":e.auditValue};q().get("/url/page/auditScreening",{params:l}).then((l=>{e.tableData=l.data.data.list,e.total=l.data.data.total,e.pageSize=l.data.data.pageSize,e.currentPage=l.data.data.currentPage,e.loading=!1}))}var ye={components:{AddLink:M,AuditLink:be},setup(e){(0,t.bv)((()=>{Ve(a)}));const l={NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_URL,a=(0,S.qj)({searchValue:"",auditValue:null,tableData:[],dialogFormVisible:{addLinkDialogFormVisible:!1,auditLinkDialogFormVisible:!1,a:1},total:0,pageSize:6,currentPage:1,auditLinkInfo:{},loading:!1}),i=()=>{a.dialogFormVisible.addLinkDialogFormVisible=!0},o=(e,l)=>{a.dialogFormVisible.auditLinkDialogFormVisible=!0,a.auditLinkInfo=l},r=(e,l)=>{a.dialogFormVisible.addLinkDialogFormVisible=e,void 0!=l&&(""!==a.searchValue?Le(a):0!==a.auditValue&&null!=a.auditValue?ve(a):Ve(a))},n=(e,l)=>{a.dialogFormVisible.auditLinkDialogFormVisible=e,void 0!=l&&(""!==a.searchValue?Le(a):0!==a.auditValue&&null!=a.auditValue?ve(a):Ve(a))},u=e=>{a.currentPage=e,""!==a.searchValue?Le(a):0!==a.auditValue&&null!=a.auditValue?ve(a):Ve(a)},d=e=>{const l=a.currentPage,t=a.pageSize;return e+1+(l-1)*t},s=()=>{_e.T.prompt("请输入网站关键字进行搜索","搜索",{confirmButtonText:"搜索",cancelButtonText:"取消",inputErrorMessage:"Invalid Email"}).then((({value:e})=>{a.auditValue="",a.searchValue=e,Le(a),null!==e?(0,N.z8)({type:"success",message:`关键字“${e}”搜索内容如下`}):(0,N.z8)({type:"success",message:"已为您清除搜索"})}))},m=()=>{a.auditValue="",Le(a),""!==a.searchValue?(0,N.z8)({type:"success",message:`关键字“${a.searchValue}”搜索内容如下`}):(0,N.z8)({type:"success",message:"已为您清除搜索"})},c=()=>{a.searchValue="",a.auditValue=null,Ve(a),(0,N.z8)({message:"刷新成功",type:"success"})};function p(e){const l=(l,a)=>{console.log("urlId=",a.urlId),q()["delete"]("/url/page/findby",{params:{urlId:a.urlId}}).then((l=>{"0"==l.data.code?((0,fe.bM)({title:"成功",message:"已成功删除“"+a.urlName+"”链接",type:"success"}),""!==e.searchValue?Le(e):0!==e.auditValue&&null!=e.auditValue?ve(e):Ve(e)):(0,fe.bM)({title:"失败",message:"链接删除失败",type:"error"})}))};return{handleDelete:l}}return(0,t.YP)((()=>a.auditValue),((e,l)=>{e&&(a.searchValue="",ve(a))})),{Search:he.Search,Delete:he.Delete,...(0,S.BK)(a),search:m,openSearch:s,addLink:i,auditLink:o,addLinkCloseDialogVisible:r,auditLinkCloseDialogVisible:n,changePage:u,...p(a),Nindex:d,url:l,refresh:c}}};const We=(0,j.Z)(ye,[["render",y],["__scopeId","data-v-2f8e28b6"]]);var De=We}}]);